{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./client/js/app.js","webpack:///./client/js/entities/bomb.js","webpack:///./client/js/entities/bone.js","webpack:///./client/js/entities/enemy_player.js","webpack:///./client/js/entities/fire_blast.js","webpack:///./client/js/entities/info.js","webpack:///./client/js/entities/player.js","webpack:///./client/js/entities/spoil.js","webpack:///./client/js/helpers/elements.js","webpack:///./client/js/helpers/sound.js","webpack:///./client/js/states/boot.js","webpack:///./client/js/states/menu.js","webpack:///./client/js/states/pending_game.js","webpack:///./client/js/states/play.js","webpack:///./client/js/states/preload.js","webpack:///./client/js/states/select_map.js","webpack:///./client/js/states/win.js","webpack:///./client/js/utils/constants.js","webpack:///./client/js/utils/utils.js"],"names":["config","type","Phaser","AUTO","parent","width","height","pixelArt","audio","noAudio","scale","mode","Scale","NONE","autoCenter","CENTER_BOTH","scene","Boot","Preload","Menu","SelectMap","PendingGame","Play","Win","physics","arcade","gravity","y","game","Game","Bomb","id","col","row","TILE_SIZE","add","existing","body","pushable","tween","tweens","targets","to","x","alpha","value","duration","ease","delay","yoyo","repeat","repeatDelay","hold","duraton","EXPLOSION_TIME","anims","create","key","frames","generateFrameNumbers","start","end","frameRate","play","GameObjects","Sprite","Bone","EnemyPlayer","spawn","skin","currentPosition","lastMoveAt","setSize","defineSelf","newPosition","time","now","animateFace","PING","face","diffX","diffY","name","playerText","Text","text","style","font","fill","stroke","strokeThickness","FireBlast","cell","hideOnComplete","addEvent","callback","destroy","bind","callbackScope","loop","Info","player","align","redStyle","bootsIcon","image","speedText","speedLabel","powerIcon","powerText","powerLabel","delayIcon","delayText","delayLabel","deadText","sys","canvas","clientWidth","setOrigin","visible","speed","power","Player","prevPosition","INITIAL_DELAY","INITIAL_POWER","INITIAL_SPEED","_lastBombTime","positionUpdaterLoop","info","defineKeyboard","socket","registry","get","alive","handleMoves","handleBombs","cursorKeys","input","keyboard","createCursorKeys","velocity","set","animationsArray","left","isDown","push","right","up","down","currentAnimation","stop","space","emit","currentCol","currentRow","Math","floor","showDeadInfo","spoil_type","SPEED","increaseSpeed","POWER","increasePower","DELAY","increaseDelay","asset","MAX_SPEED","STEP_SPEED","refreshStatistic","SpoilNotification","MIN_DELAY","STEP_DELAY","STEP_POWER","Spoil","spoil","Button","callbackContext","overFrame","outFrame","downFrame","upFrame","Input","Gamepad","TextButton","label","console","log","enable","atext","setInteractive","on","onDown","onUp","onOver","setFrame","playSound","mycallbackFunction","GameSlots","availableGames","game_slot_asset","game_enter_asset","yOffset","nbGame","availableGame","gameBox","Image","button","game_id","Container","PlayerSlots","max_players","players","asset_empty","asset_player","xOffset","YOffset","i","slotBox","slotName","_player","picture","setAlpha","finish","Group","COLOR_PRIMARY","COLOR_LIGHT","COLOR_DARK","MapSlider","selected","maps","map","component","scrollablePanel","rexUI","scrollMode","background","roundRectangle","panel","child","createPanel","mask","padding","slider","track","thumb","top","bottom","layout","labels","topOnly","getElement","forEach","click","setColor","data","sizer","orientation","item","length","circleMaskImage","maskType","radius","icon","Sound","_soundOn","_musicOn","_bgMusicPlaying","_bgSoundPlaying","_currentMusic","_currentSound","load","soundId","bgMusicPlaying","sound","stopByKey","musicOn","volume","bgSoundPlaying","soundOn","io","Scene","slotsWithGame","displayPendingGames","clientHeight","hostGameAction","playMusic","joinGameAction","slotsWithPlayer","playerCount","startGameButton","startGameAction","disactivate","leaveGameAction","gameTitle","displayGameInfo","launchGame","current_game","Object","values","activate","currentGame","url","plugin","createMap","createPlayers","setEventHandlers","joyStick","plugins","base","circle","dumpJoyStickState","s","force","angle","setText","collider","blockLayer","enemies","bombs","overlap","spoils","onPlayerVsSpoil","blasts","onPlayerVsBlast","update","stopAnimationLoop","tilemap","tileset","addTilesetImage","TILESET","createLayer","LAYER","setCollision","layer","properties","collisionTiles","bones","group","setup","onMovePlayer","onPlayerWin","onShowBomb","onDetonateBomb","onSpoilWasPicked","onShowBones","onPlayerDisconnect","spoil_id","remove","blast","becomesDead","player_id","enemy","goTo","getChildren","getTime","bomb_id","blastedCells","destroyed","putTileAt","empty","pickSpoil","winner_skin","children","spritesheet","frameWidth","frameHeight","tilemapTiledJSON","preload","scenePlugin","sceneKey","container","img","txt","selectedMap","confirmStageSelection","mapSlider","joinToNewGame","winnerText","returnToMenu","addKey","Keyboard","KeyCodes","ENTER","AVAILABLE_MAPS","findFrom","entities","entity","findAndDestroyFrom"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/js/app.js\");\n","import Boot from './states/boot.js';\r\nimport Preload from './states/preload.js';\r\nimport Menu from './states/menu.js';\r\nimport SelectMap from './states/select_map.js';\r\nimport PendingGame from './states/pending_game.js';\r\nimport Play from './states/play.js';\r\nimport Win from './states/win.js';\r\n//import RexUIPlugin from 'phaser3-rex-plugins/templates/ui/ui-plugin.js';\r\n//rexUI: RexUIPlugin;  // Declare scene property 'rexUI' as RexUIPlugin type\r\n\r\nvar config = {\r\n  type: Phaser.AUTO,\r\n  parent: 'phaser-example',\r\n  width: 980,\r\n  height: 630,\r\n  pixelArt: false,\r\n  audio: {\r\n    noAudio: false\r\n  },\r\n  scale: {\r\n    mode: Phaser.Scale.NONE,\r\n    autoCenter: Phaser.Scale.CENTER_BOTH,\r\n  },\r\n  scene: [Boot, Preload, Menu, SelectMap, PendingGame, Play, Win],\r\n  physics: {\r\n    default: \"arcade\",\r\n    arcade: {\r\n      gravity: { y: 0 }\r\n    }\r\n  }/*,\r\n  plugins: {\r\n    scene: [{\r\n        key: 'rexUI',\r\n        plugin: RexUIPlugin,\r\n        mapping: 'rexUI'\r\n      }\r\n      // ...\r\n    ]\r\n  }*/\r\n\r\n};\r\n\r\nvar game = new Phaser.Game(config);","import { TILE_SIZE, EXPLOSION_TIME } from '../utils/constants.js';\r\n\r\nexport default class Bomb extends Phaser.GameObjects.Sprite {\r\n\r\n  constructor(game, id, col, row) {\r\n    super(game, (col * TILE_SIZE) + TILE_SIZE / 2, (row * TILE_SIZE) + TILE_SIZE / 2, 'bomb_tileset');\r\n    this.game = game\r\n    this.id = id;\r\n\r\n    this.game.add.existing(this);\r\n    this.game.physics.add.existing(this);\r\n    this.body.pushable = false;\r\n\r\n    this.tween = this.game.tweens.add({\r\n      targets: this,\r\n      scale: { to: { x: 1.2, y: 1.2 } },\r\n      alpha: { value: 0, duration: 5000, ease: 'Power1', delay: 600 },\r\n      ease: 'Sine.inOut',\r\n      yoyo: true,\r\n      repeat: -1,\r\n      repeatDelay: 1000,\r\n      hold: 1000,\r\n      duraton: EXPLOSION_TIME\r\n    });\r\n\r\n    const anims=game.anims;\r\n    anims.create({key:'bomb', frames: anims.generateFrameNumbers('bomb_tileset', { start: 0, end: 13 }),  frameRate:6, repeat: -1});\r\n\r\n    this.anims.play('bomb');\r\n    this.tween.play();\r\n  }\r\n\r\n  update() {\r\n\r\n  }\r\n\r\n}\r\n","import { TILE_SIZE } from '../utils/constants.js';\r\n\r\nexport default class Bone extends Phaser.GameObjects.Sprite {\r\n\r\n  constructor(game, col, row) {\r\n    super(game, col + TILE_SIZE / 2, row  + TILE_SIZE / 2, 'bone_tileset');\r\n    this.game=game;\r\n    this.game.add.existing(this);\r\n  }\r\n\r\n}\r\n","import { TILE_SIZE, PING } from '../utils/constants.js';\r\nimport { Text } from '../helpers/elements.js';\r\n\r\nexport default class EnemyPlayer extends Phaser.GameObjects.Sprite {\r\n\r\n  constructor({ game, id, spawn, skin }) {\r\n    super(game, (spawn.x) + TILE_SIZE / 2, (spawn.y)  + TILE_SIZE / 2, 'bomberman_' + skin);\r\n\r\n    this.game = game\r\n    this.id = id;\r\n\r\n    this.currentPosition = spawn;\r\n    this.lastMoveAt = 0;\r\n    \r\n    this.game.add.existing(this);\r\n    this.game.physics.add.existing(this);\r\n    this.body.pushable = false;\r\n    this.setSize(20, 20);\r\n\r\n    const anims=game.anims;\r\n    anims.create({key:'up', frames: anims.generateFrameNumbers('bomberman_' + skin, { start: 9, end: 11 }),  frameRate:15, repeat: -1});\r\n    anims.create({key:'down', frames: anims.generateFrameNumbers('bomberman_' + skin, { start: 0, end: 2 }),  frameRate:15, repeat: -1});\r\n    anims.create({key:'right', frames: anims.generateFrameNumbers('bomberman_' + skin, { start: 6, end: 8 }),  frameRate:15, repeat: -1});\r\n    anims.create({key:'left', frames: anims.generateFrameNumbers('bomberman_' + skin, { start: 3, end: 5 }),  frameRate:15, repeat: -1});\r\n\r\n\r\n    this.defineSelf(skin)\r\n  }\r\n\r\n  update () {\r\n\r\n  }\r\n\r\n  goTo(newPosition) {\r\n    this.lastMoveAt =  this.game.time.now;\r\n\r\n    this.animateFace(newPosition);\r\n\r\n     this.tween = this.game.tweens.add({\r\n      targets: this,\r\n      x: newPosition.x,\r\n      y: newPosition.y,\r\n      duration: PING\r\n    });\r\n  }\r\n\r\n  animateFace(newPosition) {\r\n    let face = 'down';\r\n    let diffX = newPosition.x - this.currentPosition.x;\r\n    let diffY = newPosition.y - this.currentPosition.y;\r\n\r\n    if (diffX < 0) {\r\n      face = 'left'\r\n    } else if (diffX > 0) {\r\n      face = 'right'\r\n    } else if (diffY < 0) {\r\n      face = 'up'\r\n    } else if (diffY > 0) {\r\n      face = 'down'\r\n    }\r\n\r\n    this.anims.play(face)\r\n    this.currentPosition = newPosition;\r\n  }\r\n\r\n  defineSelf(name) {\r\n    let playerText = new Text({\r\n      game: this.game,\r\n      x: TILE_SIZE / 2,\r\n      y: -10,\r\n      text: name,\r\n      style: {\r\n        font: '14px Areal',\r\n        fill: '#FFFFFF',\r\n          stroke: '#000000',\r\n          strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    this.game.add.existing(playerText);\r\n  }\r\n}\r\n","import { TILE_SIZE } from '../utils/constants.js';\r\n\r\nexport default class FireBlast extends Phaser.GameObjects.Sprite {\r\n\r\n  constructor(game, cell) {\r\n    super(game, (cell.col * TILE_SIZE) + TILE_SIZE / 2, (cell.row * TILE_SIZE) + TILE_SIZE / 2, cell.type, 0);\r\n\r\n    this.game = game\r\n\r\n    const anims=game.anims;\r\n    anims.create({key:'blast', frames: anims.generateFrameNumbers(cell.type, { start: 0, end: 4 }),  frameRate:15, repeat: -1, hideOnComplete:false});\r\n    this.anims.play('blast');\r\n\r\n    //this.game.physics.arcade.enable(this);\r\n    this.game.add.existing(this);\r\n    this.game.physics.add.existing(this);\r\n\r\n    this.game.time.addEvent({\r\n      delay: 100,                // ms\r\n      callback: this.destroy.bind(this),\r\n      callbackScope: this,\r\n      loop: false\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","import { TILE_SIZE } from '../utils/constants.js';\r\n\r\nexport default class Info {\r\n\r\n  constructor({ game, player }) {\r\n    this.game = game;\r\n    this.player = player;\r\n\r\n    this.style    = { font: '14px Arial', fill: '#ffffff', align: 'left' }\r\n    this.redStyle = { font: '30px Arial', fill: '#ff0044', align: 'center' };\r\n\r\n    let bootsIcon  = this.game.add.image(TILE_SIZE*2, TILE_SIZE / 2, 'placeholder_speed');\r\n    this.speedText = this.game.add.text(TILE_SIZE*2, TILE_SIZE / 4, this.speedLabel(), this.style);\r\n    this.game.add.existing(bootsIcon);\r\n    this.game.add.existing(this.speedText);\r\n\r\n    let powerIcon  = this.game.add.image(TILE_SIZE*5, TILE_SIZE / 2, 'placeholder_power');\r\n    this.powerText = this.game.add.text(TILE_SIZE*5, TILE_SIZE / 4, this.powerLabel(), this.style);\r\n    this.game.add.existing(powerIcon);\r\n    this.game.add.existing(this.powerText);\r\n\r\n    let delayIcon  = this.game.add.image(TILE_SIZE*8, TILE_SIZE / 2, 'placeholder_time');\r\n    this.delayText = this.game.add.text(TILE_SIZE*8, TILE_SIZE / 4, this.delayLabel(), this.style);\r\n    this.game.add.existing(delayIcon);\r\n    this.game.add.existing(this.delayText);\r\n\r\n    this.deadText = this.game.add.text(this.game.sys.canvas.clientWidth/2, this.game.sys.canvas.clientWidth/2 - 30, 'You died :(', this.redStyle);\r\n    this.deadText.setOrigin(0.5,0.5);\r\n    this.deadText.visible = false\r\n  }\r\n\r\n  refreshStatistic() {\r\n    this.speedText.text = this.speedLabel();\r\n    this.powerText.text = this.powerLabel();\r\n    this.delayText.text = this.delayLabel();\r\n  }\r\n\r\n  showDeadInfo() {\r\n    this.deadText.visible = true\r\n  }\r\n\r\n  speedLabel() {\r\n    return this.player.speed\r\n  }\r\n\r\n  powerLabel() {\r\n    return `x ${this.player.power}`\r\n  }\r\n\r\n  delayLabel() {\r\n    return `${this.player.delay / 1000} sec.`\r\n  }\r\n}\r\n","import {\r\n  PING, TILE_SIZE, MAX_SPEED, STEP_SPEED, INITIAL_SPEED, SPEED, POWER, DELAY,\r\n  MIN_DELAY, STEP_DELAY, INITIAL_DELAY, INITIAL_POWER, STEP_POWER\r\n} from '../utils/constants.js';\r\n\r\nimport Info from './info.js';\r\nimport { SpoilNotification, Text } from '../helpers/elements.js';\r\n\r\nexport default class Player extends Phaser.GameObjects.Sprite {\r\n\r\n  constructor({ game, id, spawn, skin }) {\r\n    super(game, (spawn.x) + TILE_SIZE / 2, (spawn.y)  + TILE_SIZE / 2, 'bomberman_' + skin);\r\n\r\n    this.game = game;\r\n    this.id = id;\r\n\r\n    this.prevPosition = { x: spawn.x, y: spawn.y };\r\n\r\n    this.delay = INITIAL_DELAY;\r\n    this.power = INITIAL_POWER;\r\n    this.speed = INITIAL_SPEED;\r\n    this._lastBombTime = 0;\r\n\r\n    this.game.add.existing(this);\r\n    this.game.physics.add.existing(this);\r\n    this.body.pushable = false;\r\n\r\n    this.setSize(20, 20);\r\n    this.game.time.addEvent({\r\n      delay: PING,                // ms\r\n      callback: this.positionUpdaterLoop.bind(this),\r\n      callbackScope: this,\r\n      loop: true\r\n    });\r\n\r\n    const anims=game.anims;\r\n    anims.create({key:'up', frames: anims.generateFrameNumbers('bomberman_' + skin, { start: 9, end: 11 }),  frameRate:15, repeat: -1});\r\n    anims.create({key:'down', frames: anims.generateFrameNumbers('bomberman_' + skin, { start: 0, end: 2 }),  frameRate:15, repeat: -1});\r\n    anims.create({key:'right', frames: anims.generateFrameNumbers('bomberman_' + skin, { start: 6, end: 8 }),  frameRate:15, repeat: -1});\r\n    anims.create({key:'left', frames: anims.generateFrameNumbers('bomberman_' + skin, { start: 3, end: 5 }),  frameRate:15, repeat: -1});\r\n\r\n    this.info = new Info({ game: this.game, player: this });\r\n\r\n    this.defineKeyboard()\r\n    this.defineSelf(skin)\r\n    this.socket=this.game.registry.get('socketIO');\r\n    this.alive=true;\r\n  }\r\n\r\n  update() {\r\n    if (this.alive) {\r\n      this.handleMoves()\r\n      this.handleBombs()\r\n    }\r\n\r\n  }\r\n\r\n  defineKeyboard() {\r\n    this.cursorKeys  = this.game.input.keyboard.createCursorKeys();\r\n  }\r\n\r\n  handleMoves() {\r\n    this.body.velocity.set(0);\r\n    let animationsArray = []\r\n\r\n    if (this.cursorKeys.left.isDown){\r\n      this.body.velocity.x = -this.speed;\r\n      animationsArray.push('left')\r\n    } else if (this.cursorKeys.right.isDown) {\r\n      this.body.velocity.x = this.speed;\r\n      animationsArray.push('right')\r\n    }\r\n\r\n    if (this.cursorKeys.up.isDown) {\r\n      this.body.velocity.y = -this.speed;\r\n      animationsArray.push('up')\r\n    } else if (this.cursorKeys.down.isDown) {\r\n      this.body.velocity.y = this.speed;\r\n      animationsArray.push('down')\r\n    }\r\n\r\n    let currentAnimation = animationsArray[0]\r\n    if (currentAnimation){\r\n      this.anims.play(currentAnimation)\r\n      return\r\n    }\r\n\r\n    this.anims.stop();\r\n  }\r\n\r\n  handleBombs() {\r\n    if (this.cursorKeys.space.isDown) {\r\n      let now = this.game.time.now;\r\n\r\n      if (now > this._lastBombTime) {\r\n        this._lastBombTime = now + this.delay;\r\n\r\n        this.socket.emit('create bomb', { col: this.currentCol(), row: this.currentRow() });\r\n      }\r\n    }\r\n  }\r\n\r\n  currentCol() {\r\n    return Math.floor(this.body.x / TILE_SIZE)\r\n  }\r\n\r\n  currentRow() {\r\n    return Math.floor(this.body.y / TILE_SIZE)\r\n  }\r\n\r\n  positionUpdaterLoop() {\r\n    let newPosition = { x: this.x, y: this.y }\r\n\r\n    if (this.prevPosition.x !== newPosition.x || this.prevPosition.y !== newPosition.y) {\r\n      this.socket.emit('update player position', newPosition);\r\n      this.prevPosition = newPosition;\r\n    }\r\n  }\r\n\r\n  becomesDead() {\r\n    this.alive=false;\r\n    this.info.showDeadInfo()\r\n    this.destroy();\r\n  }\r\n\r\n  pickSpoil( spoil_type ){\r\n    if ( spoil_type === SPEED ){ this.increaseSpeed() }\r\n    if ( spoil_type === POWER ){ this.increasePower() }\r\n    if ( spoil_type === DELAY ){ this.increaseDelay() }\r\n  }\r\n\r\n  increaseSpeed(){\r\n    let asset = 'speed_up_no_bonus'\r\n\r\n    if (this.speed < MAX_SPEED) {\r\n      this.speed = this.speed + STEP_SPEED;\r\n      this.info.refreshStatistic();\r\n      asset = 'speed_up_bonus'\r\n    }\r\n\r\n    new SpoilNotification({ game: this.game, asset: asset, x: this.x, y: this.y })\r\n  }\r\n\r\n  increaseDelay(){\r\n    let asset = 'delay_up_no_bonus'\r\n\r\n    if (this.delay > MIN_DELAY){\r\n      this.delay -= STEP_DELAY;\r\n      this.info.refreshStatistic();\r\n      asset = 'delay_up_bonus'\r\n    }\r\n\r\n    new SpoilNotification({ game: this.game, asset: asset, x: this.x, y: this.y })\r\n  }\r\n\r\n  increasePower(){\r\n    let asset = 'power_up_bonus'\r\n\r\n    this.power += STEP_POWER;\r\n    this.info.refreshStatistic();\r\n\r\n    new SpoilNotification({ game: this.game, asset: asset, x: this.x, y: this.y })\r\n  }\r\n\r\n  defineSelf(name) {\r\n    let playerText = new Text({\r\n      game: this.game,\r\n      x: TILE_SIZE / 2,\r\n      y: -10,\r\n      text: `\\u272E ${name} \\u272E`,\r\n      style: {\r\n        font: '15px Areal',\r\n        fill: '#FFFFFF',\r\n          stroke: '#000000',\r\n          strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    this.game.add.existing(playerText);\r\n  }\r\n}\r\n","import { SPEED, POWER, DELAY, TILE_SIZE } from '../utils/constants.js';\r\n\r\nexport default class Spoil extends Phaser.GameObjects.Sprite {\r\n\r\n  constructor(game, spoil) {\r\n\r\n    let spoil_type;\r\n    if (spoil.spoil_type === DELAY) {\r\n      spoil_type = 0\r\n    }\r\n    if (spoil.spoil_type === POWER) {\r\n      spoil_type =  1\r\n    }\r\n    if (spoil.spoil_type === SPEED) {\r\n      spoil_type = 2\r\n    }\r\n\r\n    super(game, (spoil.col * TILE_SIZE)+ TILE_SIZE / 2, (spoil.row * TILE_SIZE)+ TILE_SIZE / 2, 'spoil_tileset', spoil_type);\r\n\r\n    this.id = spoil.id\r\n\r\n    game.add.existing(this);\r\n    game.physics.add.existing(this);\r\n  }\r\n\r\n}\r\n","export class Text extends Phaser.GameObjects.Text {\r\n\r\n  constructor({ game: scene, x, y, text, style }) {\r\n    super(scene, x, y, text, style);\r\n    this.setOrigin(0.5, 0.5);\r\n\r\n    scene.add.existing(this);\r\n  }\r\n\r\n}\r\n\r\nexport class Button extends Phaser.Input.Gamepad.Button {\r\n\r\n  constructor({ game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame }) {\r\n    super(game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame);\r\n    this.setOrigin(0.5, 0.5);\r\n\r\n    game.add.existing(this);\r\n  }\r\n\r\n}\r\n\r\nexport class TextButton extends Phaser.GameObjects.Sprite {\r\n  constructor({ game, x, y, asset, callback, callbackContext, upFrame, outFrame, overFrame, downFrame, label, style }) {\r\n\r\n    //check if config contains a scene\r\n    if (!game) {\r\n      console.log('missing scene');\r\n      return;\r\n    }\r\n    //check if config contains a key\r\n    if (!asset) {\r\n      console.log(\"missing key!\");\r\n      return;\r\n    }\r\n    //if there is no up property assume 0\r\n    if (!upFrame) {\r\n      upFrame = 0;\r\n    }\r\n    //if there is no down in config use up\r\n    if (!downFrame) {\r\n      downFrame = upFrame;\r\n    }\r\n    //if there is no over in config use up\r\n    if (!overFrame) {\r\n      overFrame = upFrame;\r\n    }\r\n    //call the constructor of the parent\r\n    //set at 0,0 in case there is no x and y\r\n    //in parameter\r\n    super(game, 0, 0, asset, upFrame);\r\n\r\n    //make a class level reference to the config\r\n    this.scene = game;\r\n    this.asset = asset;\r\n    this.callback = callback;\r\n    this.callbackContext = callbackContext;\r\n    this.upFrame = upFrame;\r\n    this.outFrame = outFrame;\r\n    this.overFrame = overFrame;\r\n    this.downFrame = downFrame;\r\n    this.enable = true;\r\n\r\n    //if there is an x assign it\r\n    if (x) {\r\n      this.x = x;\r\n    }\r\n    //if there is an x assign it\r\n    if (y) {\r\n      this.y = y;\r\n    }\r\n\r\n    this.atext = new Phaser.GameObjects.Text(game, x, y, label, style);\r\n    this.atext.setOrigin(0.5, 0.5);\r\n\r\n    //add this to the scene\r\n    game.add.existing(this);\r\n    game.add.existing(this.atext);\r\n    //\r\n    //make interactive and set listeners\r\n    this.setInteractive();\r\n    this.on('pointerdown', this.onDown, this);\r\n    this.on('pointerup', this.onUp, this);\r\n    this.on('pointerover', this.onOver, this);\r\n    this.on('pointerout', this.onUp, this);\r\n  }\r\n\r\n  activate() {\r\n    this.setFrame(this.downFrame);\r\n    this.enable = true;\r\n    this.visible  = true;\r\n    this.atext.visible  = true;\r\n  }\r\n\r\n  disactivate() {\r\n    this.setFrame(this.outFrame);\r\n    this.enable = false;\r\n    this.visible  = false;\r\n    this.atext.visible  = false;\r\n  }\r\n\r\n  onDown() {\r\n    if (this.enable == false) return;\r\n\r\n    this.scene.registry.get('Sound').playSound(this.scene,'FxClick01');\r\n\r\n    this.setFrame(this.downFrame);\r\n    let mycallbackFunction = this.callback.bind(this.callbackContext);\r\n    mycallbackFunction();\r\n  }\r\n\r\n  onOver() {\r\n    if (this.enable == false) return;\r\n    this.setFrame(this.overFrame);\r\n  }\r\n\r\n  onUp() {\r\n    if (this.enable == false) return;\r\n    this.setFrame(this.upFrame);\r\n  }\r\n  onOut() {\r\n    if (this.enable == false) return;\r\n    this.setFrame(this.outFrame);\r\n  }\r\n}\r\n\r\nexport class GameSlots extends Phaser.GameObjects.Container {\r\n\r\n  constructor({ game, availableGames, callback, callbackContext, x, y, style }) {\r\n    super(game);\r\n\r\n    let game_slot_asset = 'slot_backdrop'\r\n    let game_enter_asset = 'list_icon'\r\n\r\n    let yOffset = y;\r\n    let nbGame=0;\r\n\r\n    for (let availableGame of availableGames) {\r\n      let gameBox = new Phaser.GameObjects.Image(game, x+220, yOffset-5, game_slot_asset);\r\n      let button = new TextButton({\r\n        game: game,\r\n        x: x+377,\r\n        y: yOffset-6, \r\n        asset: game_enter_asset,\r\n        callback: callback.bind(callbackContext, { game_id: availableGame.id }), \r\n        callbackContext: null, \r\n        upFrame: 0, \r\n        overFrame: 1,\r\n        downFrame: 2,\r\n        outFrame: 3,\r\n        label: ''});\r\n      let text = new Phaser.GameObjects.Text(game, x+30, yOffset-28, `Join Game: ${availableGame.name}`, style);\r\n\r\n      this.add(gameBox);\r\n      this.add(button);\r\n      this.add(text);\r\n      game.add.existing(gameBox);\r\n      game.add.existing(button);\r\n      game.add.existing(text);\r\n\r\n      yOffset += 105;\r\n      nbGame++;\r\n      if (nbGame>=3) break;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n  }\r\n}\r\n\r\nexport class PlayerSlots extends Phaser.GameObjects.Container {\r\n\r\n  constructor({ game, max_players, players, x, y, asset_empty, asset_player, style }) {\r\n    super(game);\r\n\r\n    let xOffset = x;\r\n    let YOffset = y;\r\n\r\n    for (let i = 0; i < max_players; i++) {\r\n      let slotBox\r\n      let slotName\r\n      let _player = players[i]\r\n\r\n      if (_player) {\r\n        slotBox = new Phaser.GameObjects.Image(game, xOffset, YOffset, asset_player + _player.skin)\r\n        slotName = new Phaser.GameObjects.Text(game, xOffset, YOffset-90 , _player.skin, style);\r\n        slotName.setOrigin(0.5, 0);\r\n        this.add(slotBox);\r\n        this.add(slotName);\r\n      } else {\r\n        slotBox = new Phaser.GameObjects.Image(game, xOffset, YOffset, asset_empty)\r\n        this.add(slotBox);\r\n      }\r\n      xOffset += 170;\r\n      if (i==2) {\r\n        xOffset = x\r\n        YOffset=YOffset+ slotBox.height +10;\r\n      }\r\n    }\r\n    game.add.existing(this);\r\n  }\r\n\r\n}\r\n\r\nexport class SpoilNotification extends Phaser.GameObjects.Group {\r\n\r\n  constructor({ game, asset, x, y }) {\r\n    super(game)\r\n\r\n    this.picture = game.add.image(x, y - 20, asset).setAlpha(1);\r\n    this.picture.setOrigin(0.5,0.5);\r\n\r\n    this.add(this.picture);\r\n\r\n    this.tween = game.tweens.add({\r\n      targets: this.picture,\r\n      y: this.picture.y - 25,\r\n      alpha: { value: 0, duration: 1000, ease: 'Power1', delay: 600 },\r\n      duration: 600\r\n    });\r\n    this.tween.on('complete', this.finish.bind(this));\r\n  }\r\n\r\n  finish() {\r\n    console.log('SpoilNotification destroyed');\r\n    this.picture.destroy();\r\n    this.destroy();\r\n  }\r\n}\r\n\r\nconst COLOR_PRIMARY = 0x4e342e;\r\nconst COLOR_LIGHT = 0x7b5e57;\r\nconst COLOR_DARK = 0x260e04;\r\n\r\n/**\r\n * Create a Graphic Slider to select a map\r\n * @export\r\n * @class MapSlider\r\n * @extends Phaser.GameObjects.Group\r\n */\r\nexport class MapSlider extends Phaser.GameObjects.Group {\r\n\r\n  /**\r\n   * Creates an instance of MapSlider.\r\n   * @param  {any} { scene, x, y } \r\n   * @memberof MapSlider\r\n   */\r\n  constructor({ scene, x, y }) {\r\n    super(scene)\r\n\r\n    this.selected=null;\r\n\r\n    this.config = {\r\n      name: 'Options',\r\n      maps: [\r\n        { name: 'Hot', map: 'hot_map', component: 'hot_map_preview_mini' },\r\n        { name: 'Cold', map: 'cold_map', component: 'cold_map_preview_mini' },\r\n      ]\r\n    };\r\n\r\n    this.scrollablePanel = scene.rexUI.add.scrollablePanel({\r\n      x: x,\r\n      y: y,\r\n      width: 500,\r\n      height: 300,\r\n      scrollMode: 1,\r\n      background: scene.rexUI.add.roundRectangle(0, 0, 2, 2, 10, COLOR_PRIMARY),\r\n      panel: {\r\n        child: this.createPanel(scene, this.config,this),\r\n        mask: { padding: 1},\r\n      },\r\n      slider: {\r\n        track: scene.rexUI.add.roundRectangle(0, 0, 20, 10, 10, COLOR_DARK),\r\n        thumb: scene.rexUI.add.roundRectangle(0, 0, 0, 0, 13, COLOR_LIGHT),\r\n      },\r\n      space: { left: 10, right: 10, top: 10, bottom: 10, panel: 10 }\r\n    }).layout();\r\n    //.layout().drawBounds(scene.add.graphics(), 0xff0000);\r\n\r\n    var labels = [];\r\n    scene.input.topOnly = false;\r\n    labels.push(...(this.scrollablePanel).getElement('#maps.items', true));\r\n    labels.forEach(function (label) {\r\n      if (!label) {return; }\r\n      var click = scene.rexUI.add.click(label,{  }).on('click', function () {\r\n        label.getElement('text').setColor('red');\r\n        console.log(\"Map selected: \"+label.getElement('icon').name);\r\n        label.slider.selected=label.getElement('icon').name\r\n\r\n        label.slider.scene.registry.get('Sound').playSound(label.slider.scene,'FxClick01');\r\n      });\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * Create \r\n   * @param  {any} scene \r\n   * @param  {any} data \r\n   * @return \r\n   * @memberof MapSlider\r\n   */\r\n  createPanel(scene, data,slider) {\r\n    var sizer = scene.rexUI.add.sizer({ orientation: 'x', space: { item: 10 } ,name:'maps'});\r\n    //scene.rexUI.setChildrenInteractive(sizer);\r\n    for (var i = 0; i < (data['maps']).length; i++) {\r\n      var map= scene.rexUI.add.circleMaskImage(0, 0, (data['maps'])[i].component, { maskType: 'roundRectangle', radius: 10  })\r\n      const COLOR_LIGHT = 0x7b5e57;\r\n      map.name=(data['maps'])[i].map;\r\n      var label = scene.rexUI.add.label({\r\n        orientation: 'y',\r\n        icon: map,\r\n        text: scene.add.text(0, 0, map.name),\r\n        space: { icon: 3 }\r\n      });\r\n      label.slider=slider;\r\n      sizer.add(label,{key :map.name});\r\n    }\r\n    return sizer;\r\n  }\r\n\r\n  onDown() {\r\n    console.log(\"MapSlider: onDown\");\r\n  }\r\n\r\n  destroy(){\r\n    this.scrollablePanel.destroy();\r\n  }\r\n\r\n}\r\n","export class Sound {\n  constructor() {\n    this._soundOn = true;\n    this._musicOn = true;\n    this._bgMusicPlaying = false;\n    this._bgSoundPlaying = false;\n    this._currentMusic=null;\n    this._currentSound=null;\n  }\n\n  preload(scene){\n    scene.load.audio('bgMusic01', ['sound/Musics/TownTheme.mp3']);\n    scene.load.audio('bgMusic02', ['sound/Musics/Techno-Randomness_Looping.mp3']); // https://soundimage.org/dance-techno/\n    scene.load.audio('bgMusic03', ['sound/Musics/Happy-Trancin.mp3']); // https://soundimage.org/dance-techno/\n    scene.load.audio('bgMusic04', ['sound/Musics/Electric-Rain_Looping.mp3']); // https://soundimage.org/dance-techno/\n\n    scene.load.audio('FxExplosion01', ['sound/Effects/Explosion3.mp3']);\n    scene.load.audio('FxPickItem01', ['sound/Effects/PowerUp18.mp3']);\n    scene.load.audio('FxDeath01', ['sound/Effects/VOXEfrt_Cry of pain (ID 2361)_BSB.mp3']); // https://bigsoundbank.com/detail-2361-cry-of-pain.html\n    scene.load.audio('FxClick01', ['sound/Effects/UI_Quirky21.mp3']);\n    scene.load.audio('FxNewUser01', ['sound/Effects/PowerUp18.mp3']);\n  }\n\n  playMusic(scene,soundId){\n    if (this.bgMusicPlaying === true && !(this._currentMusic==soundId)){\n      scene.sound.stopByKey(this._currentMusic);\n      //scene.sound.stopAll();\n      this.bgMusicPlaying = false;\n      scene.registry.set('Sound', this);\n    }\n    if (this.musicOn === true && this.bgMusicPlaying === false) {\n      scene.sound.add(soundId, { volume: 0.5, loop: true }).play();\n      this.bgMusicPlaying = true;\n      this._currentMusic=soundId;\n      scene.registry.set('Sound', this);\n    }\n  }\n\n  playSound(scene,soundId){\n    if (this.bgSoundPlaying === true && !(this._currentMusic==soundId)){\n      scene.sound.stopByKey(this._currentSound);\n      this.bgSoundPlaying = false;\n      scene.registry.set('Sound', this);\n    }\n    if (this.soundOn === true && this.bgSoundPlaying === false) {\n      scene.sound.add(soundId, { volume: 0.8, loop: false }).play();\n      this.bgSoundPlaying = true;\n      this._currentSound=soundId;\n      scene.registry.set('Sound', this);\n    }\n  }\n\n  set musicOn(value) {\n    this._musicOn = value;\n  }\n\n  get musicOn() {\n    return this._musicOn;\n  }\n\n  set soundOn(value) {\n    this._soundOn = value;\n  }\n\n  get soundOn() {\n    return this._soundOn;\n  }\n\n  set bgMusicPlaying(value) {\n    this._bgMusicPlaying = value;\n  }\n\n  get bgMusicPlaying() {\n    return this._bgMusicPlaying;\n  }\n\n  set bgSoundPlaying(value) {\n    this._bgSoundPlaying = value;\n  }\n\n  get bgSoundPlaying() {\n    return this._bgSoundPlaying;\n  }\n}\n","import { Text } from '../helpers/elements.js';\r\nimport {Sound} from '../helpers/sound.js';\r\n\r\nexport class Boot extends Phaser.Scene {\r\n\r\n  create() {\r\n    // Make the game keep reacting to messages from the server even when the game window doesn’t have focus.\r\n    // The game pauses when I open a new tab in the same window, but does not pause when I focus on another application\r\n\r\n    new Text({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2,\r\n      text: 'Loading...',\r\n      style: {\r\n        font: '30px Areal',\r\n        fill: '#FFFFFF',\r\n        align: 'center'\r\n      }\r\n    })\r\n  }\r\n\r\n  create() {\r\n    console.log('Start Boot.create');\r\n    this.registry.set('Sound', new Sound());\r\n    this.registry.set('socketIO', io());\r\n    this.scene.start('Preload');\r\n    console.log('End  Boot.create');\r\n  }\r\n\r\n}\r\n\r\nexport default Boot;\r\n","import { Text, TextButton, GameSlots } from '../helpers/elements.js';\r\n\r\nclass Menu extends Phaser.Scene {\r\n\r\n  constructor () {\r\n      super('Menu');\r\n  }\r\n\r\n  init(data) {\r\n    this.slotsWithGame = null;\r\n    this.socket=this.registry.get('socketIO');\r\n\r\n    this.socket.on('display pending games', this.displayPendingGames.bind(this));\r\n  }\r\n\r\n  create() {\r\n    let background = this.add.image(this.sys.canvas.clientWidth/2, this.sys.canvas.clientHeight/2, 'main_menu');\r\n    background.setOrigin(0.5,0.5);\r\n\r\n\r\n    new Text({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2 - 215,\r\n      text: 'Main Menu',\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#9ec0ba',\r\n        stroke: '#7f9995',\r\n        strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    var button = new TextButton({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2 + 195,\r\n      asset:'buttons',\r\n      callback: this.hostGameAction,\r\n      callbackContext: this,\r\n      upFrame: 0,\r\n      overFrame:1,\r\n      downFrame:2,\r\n      outFrame:3,\r\n      label: 'New Game',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#000000'\r\n      }\r\n    });\r\n    this.socket.emit('enter lobby', this.displayPendingGames.bind(this));\r\n\r\n    this.registry.get('Sound').playMusic(this,'bgMusic02');\r\n  }\r\n\r\n  update() {\r\n\r\n\r\n  \r\n  }\r\n\r\n  hostGameAction() {\r\n    this.socket.emit('leave lobby');\r\n    this.scene.start('SelectMap');\r\n  }\r\n\r\n  displayPendingGames(availableGames) {\r\n    // NOTE: That is not optimal way to preview slots,\r\n    //       we should implement AddSlotToGroup, RemoveSlotFromGroup\r\n\r\n    // I triying to care about readability, not about performance.\r\n    if (this.slotsWithGame) {\r\n      this.slotsWithGame.destroy()\r\n    }\r\n\r\n    this.slotsWithGame = new GameSlots({\r\n      game: this,\r\n      availableGames: availableGames,\r\n      callback: this.joinGameAction,\r\n      callbackContext: this,\r\n      x: this.sys.canvas.clientWidth/2 - 220,\r\n      y: this.sys.canvas.clientHeight/2 -100,\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#efefef',\r\n        stroke: '#ae743a',\r\n        strokeThickness: 3\r\n      }\r\n    });\r\n  }\r\n\r\n  joinGameAction(game_id) {\r\n    this.socket.emit('leave lobby');\r\n    console.log('Selected game: '+game_id.game_id);\r\n    this.scene.start('PendingGame', game_id);\r\n  }\r\n}\r\n\r\nexport default Menu;\r\n","import { Text, TextButton, PlayerSlots } from '../helpers/elements.js';\r\n\r\nclass PendingGame extends Phaser.Scene {\r\n\r\n  constructor () {\r\n    super('PendingGame');\r\n  }\r\n\r\n  init({ game_id }) {\r\n    this.socket=this.registry.get('socketIO');\r\n    this.slotsWithPlayer = null;\r\n    this.playerCount=0;\r\n\r\n    this.game_id = game_id;\r\n\r\n    this.socket.emit('enter pending game', { game_id: this.game_id });\r\n  }\r\n\r\n  create() {\r\n    let background = this.add.image(this.sys.canvas.clientWidth/2, this.sys.canvas.clientHeight/2, 'main_menu');\r\n    background.setOrigin(0.5,0.5);\r\n\r\n    new Text({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2 - 215,\r\n      text: '',\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#9ec0ba',\r\n        stroke: '#7f9995',\r\n        strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    this.startGameButton = new TextButton({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2 + 105,\r\n      y: this.sys.canvas.clientHeight/2 + 195,\r\n      asset: 'buttons',\r\n      callback: this.startGameAction,\r\n      callbackContext: this,\r\n      overFrame: 1,\r\n      outFrame: 0,\r\n      downFrame: 2,\r\n      upFrame: 0,\r\n      label: 'Start Game',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#000000'\r\n      }\r\n    });\r\n    this.startGameButton.disactivate();\r\n\r\n    new TextButton({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2 - 105,\r\n      y: this.sys.canvas.clientHeight/2 + 195,\r\n      asset: 'buttons',\r\n      callback: this.leaveGameAction,\r\n      callbackContext: this,\r\n      overFrame: 1,\r\n      outFrame: 0,\r\n      downFrame: 2,\r\n      upFrame: 0,\r\n      label: 'Leave Game',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#000000'\r\n      }\r\n    });\r\n\r\n    this.gameTitle = new Text({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2 - 215,\r\n      text: '',\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#9ec0ba',\r\n        stroke: '#6f7975',\r\n        strokeThickness: 3\r\n      }\r\n    })\r\n\r\n    this.socket.on('update game', this.displayGameInfo.bind(this));\r\n    this.socket.on('launch game', this.launchGame.bind(this));\r\n\r\n  }\r\n\r\n  displayGameInfo({ current_game }) {\r\n    let players = Object.values(current_game.players);\r\n\r\n    this.gameTitle.text = current_game.name;\r\n\r\n    if (players.length > this.playerCount){\r\n      console.log('New player detected');\r\n      this.registry.get('Sound').playSound(this,'FxPickItem01');\r\n    }\r\n    this.playerCount=players.length;\r\n\r\n    //Destroy PlayerSlots if already existing\r\n    if (this.slotsWithPlayer) {\r\n      this.slotsWithPlayer.destroy();\r\n    }\r\n\r\n    //Create the PlayerSlots to display players\r\n    this.slotsWithPlayer = new PlayerSlots({\r\n      game: this,\r\n      max_players: current_game.max_players,\r\n      players: players,\r\n      x: this.sys.canvas.clientWidth/2 - 174,\r\n      y: this.sys.canvas.clientHeight/2 - 81,\r\n      asset_empty: 'bomberman_head_blank',\r\n      asset_player: 'bomberman_head_',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#48291c'\r\n      }\r\n    });\r\n\r\n    //Activate the Start button if more than one user in the PlayerSlots\r\n    if(players.length > 1) {\r\n      this.startGameButton.activate();\r\n    } else {\r\n      this.startGameButton.disactivate();\r\n    }\r\n  }\r\n\r\n  leaveGameAction() {\r\n    this.socket.emit('leave pending game');\r\n\r\n    this.scene.start('Menu');\r\n  }\r\n\r\n  startGameAction() {\r\n    this.socket.emit('start game');\r\n  }\r\n\r\n  launchGame(game) {\r\n    this.scene.start('Play', game);\r\n  }\r\n}\r\n\r\nexport default PendingGame;\r\n","import { findFrom, findAndDestroyFrom } from '../utils/utils.js';\r\nimport { TILESET, LAYER } from '../utils/constants.js';\r\n\r\nimport Player from '../entities/player.js';\r\nimport EnemyPlayer from '../entities/enemy_player.js';\r\nimport Bomb from '../entities/bomb.js';\r\nimport Spoil from '../entities/spoil.js';\r\nimport FireBlast from '../entities/fire_blast.js';\r\nimport Bone from '../entities/bone.js';\r\n\r\nclass Play extends Phaser.Scene {\r\n\r\n  constructor () {\r\n    super('Play');\r\n  }\r\n\r\n  init(game) {\r\n    this.socket=this.registry.get('socketIO');\r\n    this.currentGame = game\r\n  }\r\n\r\n  preload() {\r\n    var url;\r\n\r\n    //url = 'https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexvirtualjoystickplugin.min.js';\r\n    url = '/phaser3-rex-plugins/dist/rexvirtualjoystickplugin.min.js';    \r\n    this.load.plugin('rexvirtualjoystickplugin', url, true);\r\n\r\n    /*this.load.scenePlugin({\r\n      key: 'rexvirtualjoystickplugin',\r\n      url: '/phaser3-rex-plugins/dist/rexvirtualjoystickplugin.min.js',\r\n      sceneKey: 'rexvirtualjoystickplugin',\r\n      visible: false\r\n    });*/  \r\n  }\r\n\r\n  create() {\r\n    this.createMap();\r\n    this.createPlayers();\r\n    this.setEventHandlers();\r\n    //this.game.time.events.loop(400 , this.stopAnimationLoop.bind(this));\r\n\r\n    this.registry.get('Sound').playMusic(this,'bgMusic03');\r\n\r\n    this.joyStick = this.plugins.get('rexvirtualjoystickplugin').add(this, {\r\n      x: 100,\r\n      y: 100,\r\n      radius: 10,\r\n      base: this.add.circle(0, 0, 100, 0x888888),\r\n      thumb: this.add.circle(0, 0, 50, 0xcccccc),\r\n      // dir: '8dir',   // 'up&down'|0|'left&right'|1|'4dir'|2|'8dir'|3\r\n      // forceMin: 16,\r\n      enable: true\r\n    }).on('update', this.dumpJoyStickState, this);\r\n    this.cursorKeys = this.joyStick.createCursorKeys();\r\n    this.text = this.add.text(0, 0);\r\n    this.dumpJoyStickState();\r\n  }\r\n\r\n  dumpJoyStickState() {\r\n    var cursorKeys = this.joyStick.createCursorKeys();\r\n    var s = 'Key down: ';\r\n    for (var name in cursorKeys) {\r\n        if (cursorKeys[name].isDown) {\r\n            s += name + ' ';\r\n        }\r\n    }\r\n    s += '\\n';\r\n    s += ('Force: ' + Math.floor(this.joyStick.force * 100) / 100 + '\\n');\r\n    s += ('Angle: ' + Math.floor(this.joyStick.angle * 100) / 100 + '\\n');\r\n    this.text.setText(s);\r\n  }\r\n  \r\n  update() {\r\n    this.physics.add.collider(this.player, this.blockLayer);\r\n    this.physics.add.collider(this.player, this.enemies);\r\n    this.physics.add.collider(this.player, this.bombs);\r\n\r\n    this.physics.overlap(this.player, this.spoils, this.onPlayerVsSpoil, null, this);\r\n    this.physics.overlap(this.player, this.blasts, this.onPlayerVsBlast, null, this);\r\n    this.player.update();\r\n    this.stopAnimationLoop();\r\n  }\r\n\r\n  createMap() {\r\n    this.map = this.add.tilemap('hot_map');\r\n\r\n    const tileset=this.map.addTilesetImage(TILESET,null, 35, 35, 0, 0);\r\n    this.blockLayer = this.map.createLayer(LAYER, tileset);\r\n\r\n    this.map.setCollision(this.blockLayer.layer.properties.collisionTiles)\r\n\r\n    this.player  = null;\r\n    this.bones   = this.add.group({key: 'bones'});\r\n    this.bombs   = this.add.group({key: 'bombs'});\r\n    this.spoils  = this.add.group({key: 'spoils'});\r\n    this.blasts  = this.add.group({key: 'blasts'});\r\n    this.enemies = this.add.group({key: 'enemies'});\r\n  }\r\n\r\n  createPlayers() {\r\n    for (let player of Object.values(this.currentGame.players)) {\r\n      let setup = {\r\n        game:   this,\r\n        id:     player.id,\r\n        spawn:  player.spawn,\r\n        skin:   player.skin\r\n      }\r\n\r\n      if (player.id === this.socket.id) {\r\n        this.player = new Player(setup);\r\n      } else {\r\n        this.enemies.add(new EnemyPlayer(setup))\r\n      }\r\n    }\r\n  }\r\n\r\n  setEventHandlers() {\r\n    this.socket.on('move player', this.onMovePlayer.bind(this));\r\n    this.socket.on('player win', this.onPlayerWin.bind(this));\r\n    this.socket.on('show bomb', this.onShowBomb.bind(this));\r\n    this.socket.on('detonate bomb', this.onDetonateBomb.bind(this));\r\n    this.socket.on('spoil was picked', this.onSpoilWasPicked.bind(this));\r\n    this.socket.on('show bones', this.onShowBones.bind(this));\r\n    this.socket.on('player disconnect', this.onPlayerDisconnect.bind(this));\r\n  }\r\n\r\n  onPlayerVsSpoil(player, spoil) {\r\n    this.socket.emit('pick up spoil', { spoil_id: spoil.id });\r\n    this.spoils.remove(spoil,true,true);\r\n  }\r\n\r\n  onPlayerVsBlast(player, blast) {\r\n    if (player.alive) {\r\n      this.socket.emit('player died', { col: player.currentCol(), row: player.currentRow() });\r\n      player.becomesDead()\r\n      this.registry.get('Sound').playSound(this,'FxDeath01');\r\n    }\r\n  }\r\n\r\n  onMovePlayer({ player_id, x, y }) {\r\n    let enemy = findFrom(player_id, this.enemies);\r\n    if (!enemy) { return }\r\n\r\n    enemy.goTo({ x: x, y: y })\r\n  }\r\n\r\n  stopAnimationLoop() {\r\n    for (let enemy of this.enemies.getChildren()) {\r\n      if (!(typeof enemy.lastMoveAt === \"undefined\") && enemy.lastMoveAt < this.game.getTime() - 200) {\r\n        enemy.anims.stop();\r\n      }\r\n    }\r\n  }\r\n\r\n  onShowBomb({ bomb_id, col, row }) {\r\n    this.bombs.add(new Bomb(this, bomb_id, col, row));\r\n  }\r\n\r\n  onDetonateBomb({ bomb_id, blastedCells }) {\r\n    // Remove Bomb:\r\n    findAndDestroyFrom(bomb_id, this.bombs)\r\n\r\n    this.registry.get('Sound').playSound(this,'FxExplosion01');\r\n\r\n    // Render Blast:\r\n    for (let cell of blastedCells) {\r\n        this.blasts.add(new FireBlast(this, cell));\r\n    };\r\n\r\n    // Destroy Tiles:\r\n    for (let cell of blastedCells) {\r\n      if (!cell.destroyed) { continue }\r\n\r\n      this.blockLayer.putTileAt(this.blockLayer.layer.properties.empty, cell.col, cell.row);\r\n    };\r\n\r\n    // Add Spoils:\r\n    for (let cell of blastedCells) {\r\n      if (!cell.destroyed) { continue }\r\n      if (!cell.spoil) { continue }\r\n\r\n      this.spoils.add(new Spoil(this, cell.spoil));\r\n    };\r\n  }\r\n\r\n  onSpoilWasPicked({ player_id, spoil_id, spoil_type }){\r\n    if (player_id === this.player.id){\r\n      this.player.pickSpoil(spoil_type);\r\n      this.registry.get('Sound').playSound(this,'FxPickItem01');\r\n    }\r\n\r\n    findAndDestroyFrom(spoil_id, this.spoils)\r\n  }\r\n\r\n  onShowBones({ player_id, col, row }) {\r\n    this.bones.add(new Bone(this, col, row));\r\n\r\n    findAndDestroyFrom(player_id, this.enemies)\r\n    this.registry.get('Sound').playSound(this,'FxDeath01');\r\n  }\r\n\r\n  onPlayerWin(winner_skin) {\r\n    this.socket.emit('leave game');\r\n\r\n    this.scene.start('Win',winner_skin);\r\n    console.log('ToDo: this.state.start Win: '+winner_skin);\r\n  }\r\n\r\n  onPlayerDisconnect({ player_id }) {\r\n    findAndDestroyFrom(player_id, this.enemies);\r\n\r\n    if (this.enemies.children.length >= 1) { return }\r\n\r\n    this.onPlayerWin()\r\n  }\r\n}\r\n\r\nexport default Play;\r\n","export class Preload extends Phaser.Scene {\r\n\r\n  constructor () {\r\n      super('Preload');\r\n  }\r\n\r\n  preload() {\r\n\r\n    // Menu:\r\n    this.load.image('main_menu',     'images/menu/main_menu.png');\r\n    this.load.image('slot_backdrop', 'images/menu/slot_backdrop.png');\r\n\r\n    this.load.spritesheet('buttons',    'images/menu/buttons.png',{ frameWidth: 200, frameHeight: 75 });\r\n    this.load.spritesheet('check_icon', 'images/menu/accepts.png', { frameWidth: 75, frameHeight: 75 });\r\n    this.load.spritesheet('list_icon',  'images/menu/game_enter.png', { frameWidth: 75, frameHeight: 75 });\r\n\r\n    this.load.image('hot_map_preview',  'images/menu/hot_map_preview.png');\r\n    this.load.image('cold_map_preview', 'images/menu/cold_map_preview.png');\r\n    this.load.image('hot_map_preview_mini',  'images/menu/hot_map_preview_mini.png');\r\n    this.load.image('cold_map_preview_mini', 'images/menu/cold_map_preview_mini.png');\r\n    this.load.image('prev',             'images/menu/left_arrow.png');\r\n    this.load.image('next',             'images/menu/right_arrow.png');\r\n\r\n    // Map:\r\n    this.load.image('tiles',      'maps/tileset.png');\r\n    this.load.tilemapTiledJSON('hot_map',  'maps/hot_map.json');\r\n    this.load.tilemapTiledJSON('cold_map', 'maps/cold_map.json');\r\n\r\n\r\n    // Game:\r\n    this.load.spritesheet('explosion_center',     'images/game/explosion_center.png',     { frameWidth: 35, frameHeight: 35});\r\n    this.load.spritesheet('explosion_horizontal', 'images/game/explosion_horizontal.png', { frameWidth: 35, frameHeight: 35});\r\n    this.load.spritesheet('explosion_vertical',   'images/game/explosion_vertical.png',   { frameWidth: 35, frameHeight: 35});\r\n    this.load.spritesheet('explosion_up',         'images/game/explosion_up.png',         { frameWidth: 35, frameHeight: 35});\r\n    this.load.spritesheet('explosion_right',      'images/game/explosion_right.png',      { frameWidth: 35, frameHeight: 35});\r\n    this.load.spritesheet('explosion_down',       'images/game/explosion_down.png',       { frameWidth: 35, frameHeight: 35});\r\n    this.load.spritesheet('explosion_left',       'images/game/explosion_left.png',       { frameWidth: 35, frameHeight: 35});\r\n\r\n    this.load.spritesheet('spoil_tileset', 'images/game/spoil_tileset.png', { frameWidth: 35, frameHeight: 35});\r\n    this.load.spritesheet('bone_tileset',  'images/game/bone_tileset.png', { frameWidth: 35, frameHeight: 35});\r\n    this.load.spritesheet('bomb_tileset',  'images/game/bombs.png', { frameWidth: 35, frameHeight: 35});\r\n\r\n    this.load.image('speed_up_bonus',    'images/game/speed_up_bonus.png');\r\n    this.load.image('speed_up_no_bonus', 'images/game/speed_up_no_bonus.png');\r\n    this.load.image('delay_up_bonus',    'images/game/delay_up_bonus.png');\r\n    this.load.image('delay_up_no_bonus', 'images/game/delay_up_no_bonus.png');\r\n    this.load.image('power_up_bonus',    'images/game/power_up_bonus.png');\r\n\r\n    this.load.image('placeholder_power', 'images/game/placeholder_power.png');\r\n    this.load.image('placeholder_speed', 'images/game/placeholder_speed.png');\r\n    this.load.image('placeholder_time',  'images/game/placeholder_time.png');\r\n\r\n    // Skins:\r\n    this.load.image('bomberman_head_blank',     'images/game/chars/0-face.png');\r\n\r\n    this.load.image('bomberman_head_Theodora',  'images/game/chars/1-face.png');\r\n    this.load.image('bomberman_head_Ringo',     'images/game/chars/2-face.png');\r\n    this.load.image('bomberman_head_Jeniffer',  'images/game/chars/3-face.png');\r\n    this.load.image('bomberman_head_Godard',    'images/game/chars/4-face.png');\r\n    this.load.image('bomberman_head_Biarid',    'images/game/chars/5-face.png');\r\n    this.load.image('bomberman_head_Solia',     'images/game/chars/6-face.png');\r\n    this.load.image('bomberman_head_Kedan',     'images/game/chars/7-face.png');\r\n    this.load.image('bomberman_head_Nigob',     'images/game/chars/8-face.png');\r\n    this.load.image('bomberman_head_Baradir',   'images/game/chars/9-face.png');\r\n    this.load.image('bomberman_head_Raviel',    'images/game/chars/10-face.png');\r\n    this.load.image('bomberman_head_Valpo',     'images/game/chars/11-face.png');\r\n\r\n    this.load.spritesheet('bomberman_Theodora',  'images/game/chars/1-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Ringo',     'images/game/chars/2-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Jeniffer',  'images/game/chars/3-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Godard',    'images/game/chars/4-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Biarid',    'images/game/chars/5-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Solia',     'images/game/chars/6-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Kedan',     'images/game/chars/7-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Nigob',     'images/game/chars/8-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Baradir',   'images/game/chars/9-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Raviel',    'images/game/chars/10-preview.png', { frameWidth: 32, frameHeight: 32});\r\n    this.load.spritesheet('bomberman_Valpo',     'images/game/chars/11-preview.png', { frameWidth: 32, frameHeight: 32});\r\n\r\n    this.registry.get('Sound').preload(this);\r\n  }\r\n\r\n  create() {\r\n    this.scene.start('Menu');\r\n  }\r\n}\r\n\r\nexport default Preload;\r\n","import { AVAILABLE_MAPS } from '../utils/constants.js';\r\nimport { Text, TextButton, MapSlider } from '../helpers/elements.js';\r\n\r\nconst COLOR_PRIMARY = 0x4e342e;\r\nconst COLOR_LIGHT = 0x7b5e57;\r\nconst COLOR_DARK = 0x260e04;\r\n\r\nclass SelectMap extends Phaser.Scene {\r\n  \r\n\r\n\r\n  constructor () {\r\n    super('SelectMap');\r\n  }\r\n\r\n  preload() { \r\n    this.load.scenePlugin({\r\n        key: 'rexuiplugin',\r\n        url: '/phaser3-rex-plugins/dist/rexuiplugin.min.js',\r\n        //url: 'https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexuiplugin.min.js',\r\n        sceneKey: 'rexUI',\r\n        visible: false\r\n    });    \r\n  }\r\n\r\n  init() {\r\n    this.socket=this.registry.get('socketIO');\r\n  }\r\n\r\n  create() {\r\n\r\n\r\n    this.container = this.add.container(0, 0);\r\n    \r\n    var img= this.add.image(this.sys.canvas.clientWidth/2, this.sys.canvas.clientHeight/2, 'main_menu')\r\n      .setOrigin(0.5,0.5);\r\n\r\n    this.container.add(img);\r\n\r\n    var txt= new Text({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2 - 215,\r\n      text: 'Select Map',\r\n      style: {\r\n        font: '35px Areal',\r\n        fill: '#9ec0ba',\r\n        stroke: '#6f7975',\r\n        strokeThickness: 3\r\n      }\r\n    });\r\n\r\n    this.container.add(txt);\r\n\r\n    this.selectedMap='hot_map';\r\n\r\n    var button = new TextButton({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2 + 195,\r\n      asset:'check_icon',\r\n      callback: this.confirmStageSelection,\r\n      callbackContext: this,\r\n      upFrame: 0,\r\n      overFrame:1,\r\n      downFrame:2,\r\n      outFrame:3,\r\n      label: '',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#000000'\r\n      }\r\n    });\r\n \r\n    this.container.add(button);\r\n    \r\n    this.mapSlider = new MapSlider({\r\n      scene: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2\r\n    });\r\n\r\n  } \r\n\r\n  confirmStageSelection() {\r\n    if (this.mapSlider.selected!=null)\r\n      this.selectedMap=this.mapSlider.selected;\r\n    this.socket.emit('create game', this.selectedMap, this.joinToNewGame.bind(this));\r\n  };\r\n\r\n  joinToNewGame(game_id) {\r\n    this.mapSlider.destroy();\r\n    this.scene.start('PendingGame', game_id);\r\n  };\r\n\r\n  update() {}\r\n\r\n}\r\n\r\nexport default SelectMap;\r\n","import { Text,TextButton } from '../helpers/elements.js';\r\n\r\nclass Win extends Phaser.Scene {\r\n\r\n  constructor () {\r\n    super('Win');\r\n  }\r\n\r\n  init(winner_skin) {\r\n    this.skin = winner_skin\r\n  }\r\n\r\n  create() {\r\n    new Text({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2,\r\n      text: this.winnerText(),\r\n      style: {\r\n        font: '30px Areal',\r\n        fill: '#FFFFFF'\r\n      }\r\n    })\r\n\r\n    this.button = new TextButton({\r\n      game: this,\r\n      x: this.sys.canvas.clientWidth/2,\r\n      y: this.sys.canvas.clientHeight/2 + 195,\r\n      asset:'buttons',\r\n      callback: this.returnToMenu,\r\n      callbackContext: this,\r\n      upFrame: 0,\r\n      overFrame:1,\r\n      downFrame:2,\r\n      outFrame:3,\r\n      label: 'Back to Menu',\r\n      style: {\r\n        font: '20px Areal',\r\n        fill: '#000000'\r\n      }\r\n    });\r\n    this.cursorKeys  = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER);\r\n\r\n    this.registry.get('Sound').playMusic(this,'bgMusic01');\r\n  }\r\n\r\n  update() {\r\n    if( this.cursorKeys.isDown ) {\r\n      this.returnToMenu();\r\n    }\r\n  }\r\n\r\n  returnToMenu() {\r\n    this.scene.start('Menu');\r\n  }\r\n\r\n  winnerText() {\r\n    if (this.skin) {\r\n      return 'Player: \"'+this.skin+'\" won! Press Enter to return to main menu.';\r\n    }\r\n    return 'Opponent left! Press Enter to return to main menu.'\r\n  }\r\n}\r\n\r\nexport default Win;\r\n","export const AVAILABLE_MAPS = ['hot_map', 'cold_map']\r\nexport const TILESET = 'tiles';\r\nexport const LAYER   = 'Blocks';\r\n\r\nexport const TILE_SIZE = 35;\r\nexport const EXPLOSION_TIME = 2000;\r\nexport const PING = 100;\r\n\r\nexport const SPEED = 0;\r\nexport const POWER = 1;\r\nexport const DELAY = 2;\r\n\r\nexport const INITIAL_SPEED = 150;\r\nexport const STEP_SPEED = 50;\r\nexport const MAX_SPEED = 350;\r\nexport const INITIAL_DELAY = 2000;\r\nexport const STEP_DELAY = 500;\r\nexport const MIN_DELAY = 500;\r\nexport const INITIAL_POWER = 1;\r\nexport const STEP_POWER = 1;\r\n","export const findFrom = function(id, entities) {\r\n  for (let entity of entities.getChildren()) {\r\n    if (entity.id !== id) { continue }\r\n\r\n    return entity\r\n  }\r\n  return null;\r\n}\r\n\r\nexport const findAndDestroyFrom = function(id, entities) {\r\n  let entity = findFrom(id, entities);\r\n  if (!entity) { return }\r\n\r\n  entity.destroy()\r\n}\r\n"],"sourceRoot":""}